<!DOCTYPE html>
<html lang="en">
<head>
  <title>Price Calculator</title>
  <!-- <script src="script.js"></script> -->
  <link rel="stylesheet" type="text/css" href="../css/style.css" />
</head>
<body>
  <div class="PageContainer">
    <div>
      <h1>How much to charge?</h1>
      <p>If you were a freelance web designer, how much should you charge for a website? Fill out the form and find out!</p>
    </div>

    <div>
      <form id="budget">
        <label for="salary">What annual salary seems suitable for you?</label>
        <input type="text" id="salary" name="salary"/><br><br>
        <label for="days">How many days do you think it will take you to make the website?</label>
        <input type="text" id="days" name="days"/><br><br>
        <input type="submit" value="Calculate Price!" id="getPrice" onclick="getFinalPrice()"><br><br>
        <label id="finalPrice"> ??? </label><br><br>
        <label for="name">Name your quote</label>
        <input type="text" id="name" name="name"/><br><br>
        <input type="submit" value="Store Quote" id="getPrice" onclick="storeQuote()"><br><br>
      </form>
    </div>
  </div>

  <script>
    const getFinalPrice = () => {
      event.preventDefault()
      let salary = document.getElementById("salary").value;
      let days = document.getElementById("days").value;

      let url = "/api/getPrice?"+"salary="+salary+"&days="+days;

      fetch(url).then((response) => {
        return response.text();
      }).then((data) => {
        console.log(data);
        document.getElementById("finalPrice").innerHTML = data
      });
    }

    const storeQuote = () => {
      event.preventDefault()
      let name = document.getElementById("name").value;
      let salary = document.getElementById("salary").value;
      let days = document.getElementById("days").value;
      
      let url = "/api/storeQuote?"+'name='+name+"&salary="+salary+"&days="+days;

      fetch(url)
    }
  </script>
</body>
</html>
